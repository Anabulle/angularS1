<!DOCTYPE html>
<html>
<head>
<title>champ15_CoursSupplémentaire.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="cours-suppl%C3%A9mentaire-mongodb">Cours supplémentaire MongoDB</h1>
<h2 id="introduction-mongodb">Introduction MongoDB</h2>
<p>MongoDB est une base de données NoSQL orientée document, largement utilisée pour sa flexibilité, sa performance et sa facilité d'utilisation. Contrairement aux bases de données relationnelles, MongoDB utilise des documents BSON (une version binaire de JSON) pour stocker les données.</p>
<h2 id="concepts-fondamentaux-de-mongodb">Concepts Fondamentaux de MongoDB</h2>
<h3 id="collections-et-documents">Collections et Documents</h3>
<p><b>Collections: </b> Équivalentes aux tables dans les bases de données relationnelles, elles contiennent un ensemble de documents.</p>
<p><b>Documents: </b> Structures de données constituées de paires clé-valeur. Les documents d'une même collection peuvent avoir des schémas différents.</p>
<h3 id="avantages">Avantages</h3>
<p><b>Schéma Flexible:</b> Permet de stocker des documents sans schéma fixe, idéal pour des données hétérogènes ou changeantes.</p>
<p><b>Évolutivité:</b> Facilement scalable, supporte le partitionnement horizontal (sharding).</p>
<p><b>Performance:</b> Les requêtes sur des documents sont généralement plus rapides que les requêtes relationnelles complexes.</p>
<h2 id="travailler-avec-mongodb">Travailler avec MongoDB</h2>
<h3 id="cr%C3%A9ation-et-s%C3%A9lection-dune-base-de-donn%C3%A9es">Création et Sélection d'une Base de Données</h3>
<pre class="hljs"><code><div>use maBaseDeDonnees
</div></code></pre>
<p><i>Cette commande crée une nouvelle base de données si elle n'existe pas et se connecte à celle-ci.</i></p>
<h3 id="cr%C3%A9ation-dune-collection-et-insertion-de-documents">Création d'une Collection et Insertion de Documents</h3>
<pre class="hljs"><code><div>db.maCollection.insert({ <span class="hljs-attr">nom</span>: <span class="hljs-string">"John Doe"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> })
</div></code></pre>
<p><i>Insère un document dans la collection maCollection. Si cette collection n'existe pas, elle sera créée automatiquement.</i></p>
<h3 id="requ%C3%AAtes-de-base">Requêtes de Base</h3>
<p><b>Trouver des Documents : </b></p>
<pre class="hljs"><code><div>db.maCollection.find({ <span class="hljs-attr">age</span>: { <span class="hljs-attr">$gt</span>: <span class="hljs-number">20</span> } })
</div></code></pre>
<p><i>Cette commande récupère tous les documents de maCollection où l'âge est supérieur à 20.</i></p>
<p><b>Mettre à jour : </b></p>
<pre class="hljs"><code><div>db.maCollection.update({ <span class="hljs-attr">nom</span>: <span class="hljs-string">"John Doe"</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">age</span>: <span class="hljs-number">31</span> } })
</div></code></pre>
<p><i>Met à jour l'âge de John Doe à 31.</i></p>
<p><b>Suppression : </b></p>
<pre class="hljs"><code><div>db.maCollection.remove({ <span class="hljs-attr">nom</span>: <span class="hljs-string">"John Doe"</span> })
</div></code></pre>
<p><i>Supprime les documents où le nom est &quot;John Doe&quot;.</i></p>
<h1 id="pr%C3%A9sentation-de-mongoose">Présentation de Mongoose</h1>
<h2 id="introduction-%C3%A0-mongoose">Introduction à Mongoose</h2>
<p>Mongoose est une bibliothèque ODM (Object Data Modeling) pour MongoDB et Node.js. Elle fournit une solution de modélisation des données pour MongoDB, permettant une interaction plus intuitive et structurée avec la base de données. Mongoose utilise des schémas pour modéliser les données, offrant ainsi une structure et une validation des données au sein de l'environnement NoSQL de MongoDB.</p>
<h2 id="caract%C3%A9ristiques-cl%C3%A9s-de-mongoose">Caractéristiques Clés de Mongoose</h2>
<h3 id="sch%C3%A9ma">Schéma</h3>
<p><b>Définition des Schémas:</b> Les schémas définissent la structure des données dans une collection MongoDB, y compris les types de données, les valeurs par défaut et les validations.</p>
<p><b>Exemple de Schéma:</b></p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> mongoose.Schema({
  nom: <span class="hljs-built_in">String</span>,
  age: <span class="hljs-built_in">Number</span>,
  email: { <span class="hljs-keyword">type</span>: <span class="hljs-built_in">String</span>, required: <span class="hljs-literal">true</span> }
});
</div></code></pre>
<h3 id="mod%C3%A8les">Modèles</h3>
<p><b>Création de Modèles:</b> Les modèles sont des constructeurs basés sur des schémas définis. Ils représentent des documents dans MongoDB.</p>
<p><b>Utilisation d'un Modèle: </b></p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> User = mongoose.model(<span class="hljs-string">'User'</span>, userSchema);
</div></code></pre>
<h3 id="avantages-de-mongoose">Avantages de Mongoose</h3>
<p><b> Validation des Données: </b> Permet une validation côté serveur pour assurer la cohérence des données.</p>
<p><b> Conversion de Types: </b> Convertit automatiquement les types de données pour correspondre aux schémas.</p>
<p><b> Gestion des Relations: </b> Gère les relations entre les données avec des références et des populations.</p>
<h3 id="exemple-dutilisation-de-mongoose">Exemple d'Utilisation de Mongoose</h3>
<p><b> Définition d'un Schéma et d'un Modèle: </b></p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> bookSchema = <span class="hljs-keyword">new</span> mongoose.Schema({
  titre: <span class="hljs-built_in">String</span>,
  auteur: <span class="hljs-built_in">String</span>,
  pages: <span class="hljs-built_in">Number</span>
});

<span class="hljs-keyword">const</span> Book = mongoose.model(<span class="hljs-string">'Book'</span>, bookSchema);
</div></code></pre>
<p><b>Création et Enregistrement d'un Document: </b></p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> livre = <span class="hljs-keyword">new</span> Book({ titre: <span class="hljs-string">'Le Petit Prince'</span>, auteur: <span class="hljs-string">'Antoine de Saint-Exupéry'</span>, pages: <span class="hljs-number">96</span> });
livre.save();
</div></code></pre>
<p><b>Recherche dans la collection : </b></p>
<pre class="hljs"><code><div>Book.find({ auteur: <span class="hljs-string">'Antoine de Saint-Exupéry'</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, books</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.error(err);
  <span class="hljs-built_in">console</span>.log(books);
});
</div></code></pre>

</body>
</html>
